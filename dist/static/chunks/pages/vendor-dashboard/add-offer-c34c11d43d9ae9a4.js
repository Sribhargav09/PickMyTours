(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3652],{10078:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vendor-dashboard/add-offer",function(){return a(80652)}])},80652:function(e,t,a){"use strict";a.r(t);var s=a(85893),l=a(58274),o=a(78362),n=a(15824),d=a(14528),r=a(10262),i=a(83321),c=a(67294),h=a(45921),u=a(11163),m=a.n(u);t.default=()=>{let[e,t]=(0,c.useState)(""),[a,x]=(0,c.useState)(""),[p,g]=(0,c.useState)(""),[f,j]=(0,c.useState)(null),[v,b]=(0,c.useState)([]),[N,w]=(0,c.useState)({name:"",photos:""}),[y,_]=(0,c.useState)(null),[Z,P]=(0,c.useState)(!0),T=(0,u.useRouter)(),C=T.query.id;(0,c.useEffect)(()=>(C&&h.Z.get(C).then(e=>{t(e.data.data.name),x(e.data.data.description),g(e.data.data.discount),b([e.data.data.photo]),setTimeout(()=>{P(!1),console.log("This will run after 1 second!")},1e3)}).catch(e=>{console.log(e)}),()=>{}),[C]);let S=()=>{0==e.length?w({...N,name:" Name can not be empty"}):0==p.length?w({...N,name:" Discount can not be empty"}):0==v.length?w({...N,photos:"Upload a photo can not be empty"}):C?h.Z.update(C,{name:e,description:a,discount:p,photo:f}).then(e=>{m().push("/vendor-dashboard/offers"),console.log(e.data)}).catch(e=>{console.log(e)}):h.Z.create({name:e,description:a,discount:p,photo:f}).then(e=>{m().push("/vendor-dashboard/offers"),console.log(e.data)}).catch(e=>{console.log(e)})},k=e=>{let t=[...v];t.splice(e,1),b(t)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{pageTitle:"Vendor Add Tour"}),(0,s.jsx)("div",{className:"header-margin"}),(0,s.jsx)(n.Z,{}),(0,s.jsxs)("div",{className:"dashboard",children:[(0,s.jsx)("div",{className:"dashboard__sidebar bg-white scroll-bar-1",children:(0,s.jsx)(o.default,{})}),(0,s.jsx)("div",{className:"dashboard__main",children:(0,s.jsxs)("div",{className:"dashboard__content bg-light-2",children:[(0,s.jsx)("div",{className:"row y-gap-20 justify-between items-end pb-60 lg:pb-40 md:pb-32",children:(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("h1",{className:"text-30 lh-14 fw-600",children:"Add Offer"}),(0,s.jsx)("div",{className:"text-15 text-light-1",children:"This seciton for adding New Offer"})]})}),(0,s.jsx)("div",{className:"py-30 px-30 rounded-4 bg-white shadow-3",children:(0,s.jsxs)("form",{children:[(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(r.Z,{style:{width:"60%"},required:!0,id:"name",label:"Name",type:"text",error:N.name,fullwidth:!0,variant:"outlined",placeholder:"enter name",value:e,onChange:e=>t(e.target.value)})}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(r.Z,{style:{width:"100%",marginTop:"10px"},optional:!0,id:"description",label:"Description (optional)",type:"text",fullwidth:!0,variant:"outlined",placeholder:"enter description",value:a,onChange:e=>x(e.target.value)})}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(r.Z,{style:{width:"100%",marginTop:"10px"},required:!0,id:"discountPrice",label:"DiscountPrice",type:"text",error:N.discount,fullwidth:!0,variant:"outlined",placeholder:"enter price",value:p,onChange:e=>g(e.target.value)})}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsxs)("div",{className:"mt-30",children:[(0,s.jsx)("div",{className:"fw-500",children:"Feature Photo"}),(0,s.jsxs)("div",{className:"row x-gap-20 y-gap-20 pt-15",children:[(0,s.jsx)("div",{className:"col-auto",children:(0,s.jsxs)("div",{className:"w-200",children:[(0,s.jsx)("label",{htmlFor:"featurePhotoUpload",className:"d-flex ratio ratio-1:1",children:(0,s.jsxs)("div",{className:"flex-center flex-column text-center bg-blue-2 h-full w-1/1 absolute rounded-4 border-type-1",children:[(0,s.jsx)("div",{className:"icon-upload-file text-40 text-blue-1 mb-10"}),(0,s.jsx)("div",{className:"text-blue-1 fw-500",children:"Upload Image"})]})}),(0,s.jsx)("input",{type:"file",name:"photo",id:"featurePhotoUpload",accept:"image/png, image/jpeg",className:"d-none",onChange:function(e){let t=e.target.files,a=t[0],s=new FileReader;j(a);let l=[];s.onloadend=()=>{let e=new Image;e.onload=()=>{e.width>800||e.height>800?w({...N,photos:"Image ".concat(a.name," exceeds the maximum size of ").concat(800,"px.")}):["image/png","image/jpeg"].includes(a.type.toLowerCase())?(l.push(s.result),l.length===t.length&&(b([...v,...l]),w({...N,photos:""}))):w({...N,photos:"Image ".concat(a.name," is not a valid file type. Only PNG and JPEG are allowed.")})},e.onerror=()=>{w({...N,photos:"Image ".concat(a.name," could not be loaded.")})},e.src=s.result},console.log(l),console.log(N),b([...l]),s.readAsDataURL(a)}}),(0,s.jsx)("div",{className:"text-start mt-10 text-14 text-light-1",children:"PNG or JPG no bigger than 800px wide and tall."})]})}),v.map((e,t)=>(0,s.jsx)("div",{className:"col-auto",children:(0,s.jsxs)("div",{className:"d-flex ratio ratio-1:1 w-200",children:[(0,s.jsx)("img",{src:e,alt:"image",className:"img-ratio rounded-4"}),(0,s.jsx)("div",{className:"d-flex justify-end px-10 py-10 h-100 w-1/1 absolute",onClick:()=>k(t),children:(0,s.jsx)("div",{className:"size-40 bg-white rounded-4 flex-center cursor-pointer",children:(0,s.jsx)("i",{className:"icon-trash text-16"})})})]})},t)),N.photos&&(0,s.jsx)("div",{className:"col-12 mb-10  text-red-1",children:error.photos})]})]})}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(i.Z,{className:"button h-30 px-24 .dark-1 bg-blue-1 text-white",variant:"outlined",onClick:()=>S(),children:"Save"})})]})}),(0,s.jsx)(d.default,{})]})})]})]})}},45921:function(e,t,a){"use strict";var s=a(4063);t.Z=new class{getAll(){return s.Z.get("/offers")}get(e){return s.Z.get("/offer/".concat(e))}create(e){return s.Z.post("/create-offer",e)}update(e,t){return s.Z.put("/update-offer/".concat(e),t)}delete(e){return s.Z.delete("/remove-offer/".concat(e))}deleteAll(){return s.Z.delete("/offers")}findByTitle(e){return s.Z.get("/offers?title=".concat(e))}}}},function(e){e.O(0,[4114,5675,1664,4827,252,3726,3600,4978,262,2096,6057,9774,2888,179],function(){return e(e.s=10078)}),_N_E=e.O()}]);