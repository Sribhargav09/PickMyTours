(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1686],{96326:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vendor-dashboard/add-user",function(){return a(98348)}])},98348:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var s=a(85893),l=a(58274),r=a(78362),o=a(15824),i=a(14528),n=a(67294),d=a(10262),c=a(33841),u=a(15914),p=a(63366),h=a(87462),m=a(90512),g=a(94780),x=a(41796),v=a(90948),b=a(71657),f=a(59773),j=a(58146),N=a(58974),w=a(51705),y=a(1588);let Z=(0,y.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),C=(0,y.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]),$=(0,y.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var I=a(27621);function _(e){return(0,I.Z)("MuiMenuItem",e)}let O=(0,y.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),k=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],S=e=>{let{disabled:t,dense:a,divider:s,disableGutters:l,selected:r,classes:o}=e,i=(0,g.Z)({root:["root",a&&"dense",t&&"disabled",!l&&"gutters",s&&"divider",r&&"selected"]},_,o);return(0,h.Z)({},o,i)},q=(0,v.ZP)(j.Z,{shouldForwardProp:e=>(0,v.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})(({theme:e,ownerState:t})=>(0,h.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${O.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,x.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${O.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,x.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${O.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,x.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,x.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${O.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${O.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${Z.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${Z.inset}`]:{marginLeft:52},[`& .${$.root}`]:{marginTop:0,marginBottom:0},[`& .${$.inset}`]:{paddingLeft:36},[`& .${C.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,h.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${C.root} svg`]:{fontSize:"1.25rem"}}))),P=n.forwardRef(function(e,t){let a;let l=(0,b.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:o="li",dense:i=!1,divider:d=!1,disableGutters:c=!1,focusVisibleClassName:u,role:g="menuitem",tabIndex:x,className:v}=l,j=(0,p.Z)(l,k),y=n.useContext(f.Z),Z=n.useMemo(()=>({dense:i||y.dense||!1,disableGutters:c}),[y.dense,i,c]),C=n.useRef(null);(0,N.Z)(()=>{r&&C.current&&C.current.focus()},[r]);let $=(0,h.Z)({},l,{dense:Z.dense,divider:d,disableGutters:c}),I=S(l),_=(0,w.Z)(C,t);return l.disabled||(a=void 0!==x?x:-1),(0,s.jsx)(f.Z.Provider,{value:Z,children:(0,s.jsx)(q,(0,h.Z)({ref:_,role:g,tabIndex:a,component:o,focusVisibleClassName:(0,m.Z)(I.focusVisible,u),className:(0,m.Z)(I.root,v)},j,{ownerState:$,classes:I}))})});var R=a(83321),F=a(4063),M=new class{getAll(){return F.Z.get("/users")}get(e){return F.Z.get("/create-user/".concat(e))}create(e){return F.Z.post("/create-user",e)}update(e,t){return F.Z.put("/update-user/".concat(e),t)}delete(e){return F.Z.delete("/remove-user/".concat(e))}deleteAll(){return F.Z.delete("/user")}},T=a(11163),V=a.n(T),L=()=>{let[e,t]=(0,n.useState)(""),[a,p]=(0,n.useState)(""),[h,m]=(0,n.useState)(""),[g,x]=(0,n.useState)(""),[v,b]=(0,n.useState)(""),[f,j]=(0,n.useState)(""),[N,w]=(0,n.useState)({name:"",email:"",password:"",phoneNumber:"",userRole:"",photos:""}),[y,Z]=(0,n.useState)(null),[C,$]=(0,n.useState)([]),[I,_]=(0,n.useState)(null),[O,k]=(0,n.useState)(!0),S=(0,T.useRouter)(),q=S.query.id;(0,n.useEffect)(()=>(q&&M.get(q).then(e=>{t(e.data.data.firstName),p(e.data.data.lastName),$([e.data.data.photo]),m(e.data.data.email),x(e.data.data.password),b(e.data.data.phoneNumber),setTimeout(()=>{k(!1),console.log("This will run after 1 second!")},1e3),console.log(F-user)}).catch(e=>{console.log(e)}),()=>{}),[q]);let F=()=>{0==e.length?w({...N,name:" Name can not be empty"}):0==h.length?w({...N,email:"email is required"}):g.length<8?w({...N,password:"password is required"}):v.length<=10?w({...N,phoneNumber:"phoneNumber is required"}):0==f.length?w({...N,userRole:"userRole is required"}):0==C.length&&w({...N,photos:"Upload a photo can not be empty"}),q?M.update(q,{firstName:e,lastName:a,email:h,password:g,phoneNumber:v,userRole:f}).then(e=>{V().push("/vendor-dashboard/add-user"),console.log(e.data)}).catch(e=>{console.log(e)}):M.create({firstName:e,lastName:a,email:h,password:g,phone:v,role:f,photo:y}).then(e=>{V().push("/vendor-dashboard/users"),console.log(e.data)}).catch(e=>{console.log(e)}),q&&M.delete(q).then(e=>{V().push("/vendor-dashboard/add-user"),console.log(e.data)}).catch(e=>{console.log(e)})},L=e=>{let t=[...C];t.splice(e,1),$(t)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{pageTitle:"Vendor Add Tour"}),(0,s.jsx)("div",{className:"header-margin"}),(0,s.jsx)(o.Z,{}),(0,s.jsxs)("div",{className:"dashboard",children:[(0,s.jsx)("div",{className:"dashboard__sidebar bg-white scroll-bar-1",children:(0,s.jsx)(r.default,{})}),(0,s.jsx)("div",{className:"dashboard__main",children:(0,s.jsxs)("div",{className:"dashboard__content bg-light-2",children:[(0,s.jsx)("div",{className:"row y-gap-20 justify-between items-end pb-60 lg:pb-40 md:pb-32",children:(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("h1",{className:"text-30 lh-14 fw-600",children:"Add User"}),(0,s.jsx)("div",{className:"text-15 text-light-1",children:"This seciton for adding New User"})]})}),(0,s.jsxs)("div",{className:"py-30 px-30 rounded-4 bg-white shadow-3",children:[(0,s.jsxs)("form",{children:[(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(d.Z,{style:{width:"60%"},required:!0,id:"firstName",label:"FirstName",type:"text",fullwidth:!0,variant:"outlined",placeholder:"enter firstname",value:e,onChange:e=>t(e.target.value)})}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(d.Z,{style:{width:"60%"},id:"lastName",label:"LastName (optional)",type:"text",fullwidth:!0,variant:"outlined",placeholder:"enter lastname",value:a,onChange:e=>p(e.target.value)})}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(d.Z,{style:{width:"60%"},required:!0,id:"email",label:"Email",type:"email",fullwidth:!0,variant:"outlined",placeholder:"enter email",value:h,onChange:e=>m(e.target.value)})}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(d.Z,{style:{width:"60%"},required:!0,id:"password",label:"Password",type:"password",fullwidth:!0,variant:"outlined",placeholder:"enter password",value:g,onChange:e=>x(e.target.value)})}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(d.Z,{style:{width:"60%"},required:!0,id:"phoneNumber",label:"PhoneNumber",type:"text",fullwidth:!0,variant:"outlined",placeholder:"enter phonenumber",value:v,onChange:e=>b(e.target.value)})}),(0,s.jsx)("br",{}),(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)(c.Z,{children:"user role"}),(0,s.jsxs)(u.Z,{style:{width:"30%",marginTop:"5"},required:!0,id:"userRole",label:"UserRole",value:f,onChange:e=>j(e.target.value),children:[(0,s.jsx)(P,{value:"user",children:"User"}),(0,s.jsx)(P,{value:"vendor",children:"Vendor"}),(0,s.jsx)(P,{value:"manager",children:"Manager"})]})]}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsxs)("div",{className:"mt-30",children:[(0,s.jsx)("div",{className:"fw-500",children:"Feature Photo"}),(0,s.jsxs)("div",{className:"row x-gap-20 y-gap-20 pt-15",children:[(0,s.jsx)("div",{className:"col-auto",children:(0,s.jsxs)("div",{className:"w-200",children:[(0,s.jsx)("label",{htmlFor:"featurePhotoUpload",className:"d-flex ratio ratio-1:1",children:(0,s.jsxs)("div",{className:"flex-center flex-column text-center bg-blue-2 h-full w-1/1 absolute rounded-4 border-type-1",children:[(0,s.jsx)("div",{className:"icon-upload-file text-40 text-blue-1 mb-10"}),(0,s.jsx)("div",{className:"text-blue-1 fw-500",children:"Upload Image"})]})}),(0,s.jsx)("input",{type:"file",name:"photo",id:"featurePhotoUpload",accept:"image/png, image/jpeg",className:"d-none",onChange:function(e){let t=e.target.files,a=t[0],s=new FileReader;Z(a);let l=[];s.onloadend=()=>{let e=new Image;e.onload=()=>{e.width>800||e.height>800?w({...N,photos:"Image ".concat(a.name," exceeds the maximum size of ").concat(800,"px.")}):["image/png","image/jpeg"].includes(a.type.toLowerCase())?(l.push(s.result),l.length===t.length&&($([...C,...l]),w({...N,photos:""}))):w({...N,photos:"Image ".concat(a.name," is not a valid file type. Only PNG and JPEG are allowed.")})},e.onerror=()=>{w({...N,photos:"Image ".concat(a.name," could not be loaded.")})},e.src=s.result},console.log(l),console.log(N),$([...l]),s.readAsDataURL(a)}}),(0,s.jsx)("div",{className:"text-start mt-10 text-14 text-light-1",children:"PNG or JPG no bigger than 800px wide and tall."})]})}),C.map((e,t)=>(0,s.jsx)("div",{className:"col-auto",children:(0,s.jsxs)("div",{className:"d-flex ratio ratio-1:1 w-200",children:[(0,s.jsx)("img",{src:e,alt:"image",className:"img-ratio rounded-4"}),(0,s.jsx)("div",{className:"d-flex justify-end px-10 py-10 h-100 w-1/1 absolute",onClick:()=>L(t),children:(0,s.jsx)("div",{className:"size-40 bg-white rounded-4 flex-center cursor-pointer",children:(0,s.jsx)("i",{className:"icon-trash text-16"})})})]})},t)),N.photos&&(0,s.jsx)("div",{className:"col-12 mb-10  text-red-1",children:error.photos})]})]})}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(R.Z,{className:"button h-30 px-24 .dark-1 bg-blue-1 text-white",variant:"outlined",onClick:()=>F(),children:"submit"})})]}),(0,s.jsx)("div",{})]}),(0,s.jsx)(i.default,{})]})})]})]})}}},function(e){e.O(0,[4114,5675,1664,4827,252,3726,3600,4978,262,2096,6057,9774,2888,179],function(){return e(e.s=96326)}),_N_E=e.O()}]);